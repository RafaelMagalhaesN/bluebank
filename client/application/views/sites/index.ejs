<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Blue Bank</title>
		<!-- JQuery -->
		<script src="js/jquery-2.2.1.js"></script>
		<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="css/style.css">
		

		<script type="text/javascript">
			$(document).ready(function(){
				
				function loadAccounts(){	
					var xhr = new XMLHttpRequest();
					xhr.open("GET", "http://localhost:8080/api");
					xhr.onload = function(){
						if(xhr.status === 200){
							var data = $.parseJSON(xhr.responseText);
	

							for(i = 0; i< data.length; i++){
								$('#clients').append(
									'<tr>'+
										'<td>'+
										data[i].nome +
										'</td>' + 
										'<td>'+
										data[i].cpf +
										'</td>'+
										'<td>'+
										data[i].agencia+
										'</td>'+
										'<td>'+
										data[i].conta+
										'</td>'+
										'<td>'+
										data[i].banco+
										'</td>'+
										'<td>'+
										'R$ '+ data[i].saldo+
										'</td>'+
									'</tr>'
								);
								
							}
						}
					}
					xhr.send();
				}
				loadAccounts();

				$('#btnContas').click(function(){
					$('#transferencias').hide();
					$('#contas').show();
				});

				$('#btnTransf').click(function(){
					$('#contas').hide();
					$('#transferencias').show();
				});



			    function loadCpf(cpf){	
					var xhr = new XMLHttpRequest();
					var data;
					xhr.open("GET", "http://localhost:8080/cpf/"+cpf);
					xhr.onload = function(){
						if(xhr.status === 200){
							 data = $.parseJSON(xhr.responseText);
							 
							}
						}
					
					xhr.send();
					
				}


				function loadAllTransfers(){	
					var xhr = new XMLHttpRequest();
					xhr.open("GET", "http://localhost:8080/transferencias");
					xhr.onload = function(){
						if(xhr.status === 200){
							var data = $.parseJSON(xhr.responseText);

							for(i = 0; i< data.length; i++){

								$('#tableTransferencias').append(
									'<tr>'+
										'<td>'+
										 data[i].from_user_cpf  +
										'</td>' + 
										'<td>'+
										data[i].from_user_agencia + '/' + data[i].from_user_conta +
										'</td>'+
										'<td>'+
										data[i].from_user_banco+ 
										'</td>'+
										'<td>'+
										 data[i].to_user_cpf  +
										'</td>' + 
										'<td>'+
										data[i].to_user_agencia + '/' + data[i].to_user_conta +
										'</td>'+
										'<td>'+
										data[i].to_user_banco+ 
										'</td>'+
										'<td>'+
										data[i].createdAt+ 
										'</td>'+
										'<td>'+
										 'R$ '+ data[i].valor_transferido+ 
										'</td>'+
									'</tr>'
								);
								
							}
						}
					}
					xhr.send();
				}
				loadAllTransfers();


			});
		</script>
	</head>
	<body>
		<header>
			
			<div>
			<center>
					<button class="btn btn-default btn-lg" id="btnContas" >CONTAS ATIVAS</button>
					<button class="btn btn-default btn-lg" id="btnTransf" >TODAS AS TRANSFERENCIAS</button>
					<button class="btn btn-primary btn-lg" id="btnRealizarTransf" >REALIZAR TRANSFERENCIA</button>
			</center>	
			</div>

			<div class="header-lightblue">
				<div class="container">
					<ul>
						
					</ul>
				</div>
			</div>.
		</header>

		<div id="contas">
		<div class="container" style="" id="container_form">
			<div class="panel panel-default">

			<div class="panel-heading"><h4>Contas ativas no momento</h4></div>
			
			<table class="table table-hover" id="clients">
				<tr>
					<th>Nome</th>
					<th>CPF</th>
					<th>Agencia</th>
					<th>Conta</th>
					<th>Banco</th>
					<th>Saldo</th>
				</tr>

			</table>
			
			</div>
		</div>
		</div>

		<div id="transferencias" style="display:none">
		<div class="container"  id="container_form">
			<div class="panel panel-default">

			<div class="panel-heading"><h4>Historico de transferencias</h4></div>
			
			<table class="table table-hover" id="tableTransferencias">
				<tr>
					<th>CPF do depositante</th>
					<th>AG/Conta do depositante</th>
					<th>Banco depositante</th>
					<th>CPF do favorecido</th>
					<th>AG/Conta do favorecido</th>
					<th>Banco do favorecido</th>
					<th>Movimentação realizada em</th>
					<th>Valor da transferencia</th>
				</tr>

			</table>
			
			</div>
		</div>
		</div>



		
		<script type= "text/javascript" src="bootstrap/js/bootstrap.min.js"></script>		
	</body>
</html>